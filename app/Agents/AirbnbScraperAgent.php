<?php

namespace App\Agents;

use App\Models\Agent;

use App\Http\Resources\HousingRoomResource;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use App\Custom\Conversation;
use App\Services\AgentService;
use Illuminate\Support\Facades\Auth;
use OpenAI\Laravel\Facades\OpenAI;
use App\Models\Message;

class AirbnbScraperAgent extends Agent
{
    public $tools;
    public $tool_choice;

    public function run($data = null) {
        echo "AirbnbScraperAgent run() called\n";
        // data is html code

        // $this->functionCall = ['name' => 'handle_texts'];

        $message = new Message();
        $message->content = <<<EOT
        <div class="_xgxxi4"><div class="_1kpxj8f"><button aria-label="Schließen" type="button" class="l1ovpqvx c1h5tsj6 dir dir-ltr"><span class="i3tjjh1 dir dir-ltr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" aria-hidden="true" role="presentation" focusable="false" style="display: block; fill: none; height: 16px; width: 16px; stroke: currentcolor; stroke-width: 4; overflow: visible;"><path fill="none" d="M20 28 8.7 16.7a1 1 0 0 1 0-1.4L20 4"></path></svg></span></button></div><div><div class="_88xxct"><div class="_1jdtwz4"><div class="_c2acbp"><button type="button" class="l1ovpqvx bebj5md c85v83j dir dir-ltr"><div class="_5kaapu"><span class="_14tkmhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" aria-hidden="true" role="presentation" focusable="false" style="display: block; fill: none; height: 16px; width: 16px; stroke: currentcolor; stroke-width: 2; overflow: visible;"><g fill="none"><path d="M27 18v9a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-9M16 3v23V3zM6 13l9.3-9.3a1 1 0 0 1 1.4 0L26 13"></path></g></svg></span>Teilen</div></button></div><div><button aria-label="Zur Wunschliste hinzufügen" data-testid="pdp-save-button-unsaved" type="button" class="l1ovpqvx bebj5md c85v83j dir dir-ltr"><div aria-hidden="true" class="_5kaapu"><span class="_14tkmhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" aria-hidden="true" role="presentation" focusable="false" style="display: block; fill: none; height: 16px; width: 16px; stroke: currentcolor; stroke-width: 2; overflow: visible;"><path d="M16 28c7-4.73 14-10 14-17a6.98 6.98 0 0 0-7-7c-1.8 0-3.58.68-4.95 2.05L16 8.1l-2.05-2.05a6.98 6.98 0 0 0-9.9 0A6.98 6.98 0 0 0 2 11c0 7 7 12.27 14 17z"></path></svg></span>Speichern</div></button></div></div></div></div></div><div class="_lc317x" theme="[object Object]"><section><div class="bk5zv5c b1w3s95i pxj7xmk dir dir-ltr" style="--computedBottom: 4; --computedTop: 0; --computedBottomMediumAndAbove: 6; --computedBottomLargeAndAbove: 6; --computedTopMediumAndAbove: 0; --computedTopLargeAndAbove: 0;"><div class="_1a6d9c4"><div class="plmw1e5 mq5rv0q dir dir-ltr" style="--maxWidth: 1120px;"><section><div class="bk5zv5c b1w3s95i pxj7xmk dir dir-ltr" style="--computedBottom: 0; --computedTop: 0; --computedBottomMediumAndAbove: 0; --computedBottomLargeAndAbove: 0; --computedTopMediumAndAbove: 2; --computedTopLargeAndAbove: 2;"><div data-testid="photo-viewer-overview" class="_1q1vg1w"><div class="sewcpu6 dir dir-ltr" style="--spacingBottom: 3;"><div class="t5p7tdn dir dir-ltr"><section><h2 tabindex="-1" class="hnwb2pb dir dir-ltr" elementtiming="LCP-target">Fotorundgang</h2></section></div></div><div class="_88xxct"><div class="_1i6g032"><div class="_lk9qdq"><button aria-label="Zu Wohnbereich scrollen" type="button" class="l1ovpqvx bbkw4bl c1rxa9od dir dir-ltr"><div class="_11z41kk"><div class="ifwa7km bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Wohnbereich Bild 1" style="--dls-liteimage-height: auto; --dls-liteimage-width: auto; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover; --dls-liteimage-padding-top: 65.7895%;"><div class="aoru8m9 i9cqrtb dir dir-ltr"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg?im_w=240 1x, https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg?im_w=320 2x" media="(max-width: 1439px)"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg?im_w=240 1x, https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg?im_w=480 2x" media="(min-width: 1439.1px)"><img class="itu7ddv aoru8m9 i1mla2as dir dir-ltr" aria-hidden="true" alt="Wohnbereich Bild 1" decoding="async" elementtiming="LCP-target" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse aoru8m9 bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg?im_w=720);"></div></div></div></div><div class="_18nt3ak">Wohnbereich</div></button></div><div class="_lk9qdq"><button aria-label="Zu Voll ausgestattete Küche scrollen" type="button" class="l1ovpqvx bbkw4bl c1rxa9od dir dir-ltr"><div class="_11z41kk"><div class="ifwa7km bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 1" style="--dls-liteimage-height: auto; --dls-liteimage-width: auto; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover; --dls-liteimage-padding-top: 65.7895%;"><div class="aoru8m9 i9cqrtb dir dir-ltr"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg?im_w=240 1x, https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg?im_w=320 2x" media="(max-width: 1439px)"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg?im_w=240 1x, https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg?im_w=480 2x" media="(min-width: 1439.1px)"><img class="itu7ddv aoru8m9 i1mla2as dir dir-ltr" aria-hidden="true" alt="Voll ausgestattete Küche Bild 1" decoding="async" elementtiming="LCP-target" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse aoru8m9 bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg?im_w=720);"></div></div></div></div><div class="_18nt3ak">Voll ausgestattete Küche</div></button></div><div class="_lk9qdq"><button aria-label="Zu Badezimmer scrollen" type="button" class="l1ovpqvx bbkw4bl c1rxa9od dir dir-ltr"><div class="_11z41kk"><div class="ifwa7km bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Badezimmer Bild 1" style="--dls-liteimage-height: auto; --dls-liteimage-width: auto; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover; --dls-liteimage-padding-top: 65.7895%;"><div class="aoru8m9 i9cqrtb dir dir-ltr"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/5f6b9ec3-1e41-4157-ad24-080974c9a70c.jpeg?im_w=240 1x, https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/5f6b9ec3-1e41-4157-ad24-080974c9a70c.jpeg?im_w=320 2x" media="(max-width: 1439px)"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/5f6b9ec3-1e41-4157-ad24-080974c9a70c.jpeg?im_w=240 1x, https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/5f6b9ec3-1e41-4157-ad24-080974c9a70c.jpeg?im_w=480 2x" media="(min-width: 1439.1px)"><img class="itu7ddv aoru8m9 i1mla2as dir dir-ltr" aria-hidden="true" alt="Badezimmer Bild 1" decoding="async" elementtiming="LCP-target" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/5f6b9ec3-1e41-4157-ad24-080974c9a70c.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/pictures/miso/Hosting-1022870940231653444/original/5f6b9ec3-1e41-4157-ad24-080974c9a70c.jpeg" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse aoru8m9 bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/5f6b9ec3-1e41-4157-ad24-080974c9a70c.jpeg?im_w=720);"></div></div></div></div><div class="_18nt3ak">Badezimmer</div></button></div><div class="_lk9qdq"><button aria-label="Zu Schlafbereich scrollen" type="button" class="l1ovpqvx bbkw4bl c1rxa9od dir dir-ltr"><div class="_11z41kk"><div class="ifwa7km bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Schlafbereich Bild 1" style="--dls-liteimage-height: auto; --dls-liteimage-width: auto; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover; --dls-liteimage-padding-top: 65.7895%;"><div class="aoru8m9 i9cqrtb dir dir-ltr"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/1ab819db-a690-4eb0-98f7-dff1e9128da8.jpeg?im_w=240 1x, https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/1ab819db-a690-4eb0-98f7-dff1e9128da8.jpeg?im_w=320 2x" media="(max-width: 1439px)"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/1ab819db-a690-4eb0-98f7-dff1e9128da8.jpeg?im_w=240 1x, https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/1ab819db-a690-4eb0-98f7-dff1e9128da8.jpeg?im_w=480 2x" media="(min-width: 1439.1px)"><img class="itu7ddv aoru8m9 i1mla2as dir dir-ltr" aria-hidden="true" alt="Schlafbereich Bild 1" decoding="async" elementtiming="LCP-target" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/1ab819db-a690-4eb0-98f7-dff1e9128da8.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/pictures/miso/Hosting-1022870940231653444/original/1ab819db-a690-4eb0-98f7-dff1e9128da8.jpeg" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse aoru8m9 bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/1ab819db-a690-4eb0-98f7-dff1e9128da8.jpeg?im_w=720);"></div></div></div></div><div class="_18nt3ak">Schlafbereich</div></button></div></div></div></div></div></section></div></div><div data-pageslot="true" class="c1yo0219 dir dir-ltr"><div class="_1a6d9c4"><div class="plmw1e5 mq5rv0q dir dir-ltr" style="--maxWidth: 1120px;"><section><div class="bk5zv5c b1w3s95i pxj7xmk dir dir-ltr" style="--computedBottom: 3; --computedTop: 2; --computedBottomMediumAndAbove: 1; --computedBottomLargeAndAbove: 3; --computedTopMediumAndAbove: 5; --computedTopLargeAndAbove: 5;"><div data-testid="photo-viewer-section" class="_1gjkp1"><div class="c16f2viy dir dir-ltr"><div class="_12ifkibl"><div id="scrollTo_Wohnbereich" class="_4cdkw4"><section><div class="bk5zv5c b1w3s95i pxj7xmk dir dir-ltr" style="--computedBottom: 3; --computedTop: 0; --computedBottomMediumAndAbove: 3; --computedBottomLargeAndAbove: 3; --computedTopMediumAndAbove: 0; --computedTopLargeAndAbove: 0;"><div class="sewcpu6 dir dir-ltr" style="--spacingBottom: 1;"><div class="t5p7tdn dir dir-ltr"><section><h2 tabindex="-1" class="hnwb2pb dir dir-ltr" elementtiming="LCP-target">Wohnbereich</h2></section></div></div><div class="_1dmhz6v"><ol class="_7h1p0g"><li theme="[object Object]" class="_1f1oir5"><span>Schlafsofa</span></li></ol></div></div></section></div></div><div class="_10kc7acl"><div class="_125gmrun"><div style="display: grid; grid-area: 1 / 1;"><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679416" aria-label="Wohnbereich Bild 1" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Wohnbereich Bild 1" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg?im_w=1200 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Wohnbereich Bild 1" decoding="async" elementtiming="LCP-target" id="1778679416" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg?aki_policy=large" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/cd6e542c-4f92-4c67-8e0e-e404350a9eff.jpeg?im_w=720);"></div></div></div></div></button></div></div></div><div style="display: grid; grid-area: 2 / 1;"><div class="_1lkwexi4"><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679410" aria-label="Wohnbereich Bild 2" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Wohnbereich Bild 2" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/5c818c3e-c33f-4957-8791-125116483078.jpeg?im_w=720 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Wohnbereich Bild 2" decoding="async" elementtiming="LCP-target" id="1778679410" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/5c818c3e-c33f-4957-8791-125116483078.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/5c818c3e-c33f-4957-8791-125116483078.jpeg?aki_policy=large" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/5c818c3e-c33f-4957-8791-125116483078.jpeg?im_w=720);"></div></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679430" aria-label="Wohnbereich Bild 3" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Wohnbereich Bild 3" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/1966a7c1-cb07-4f8e-a17a-102aed38e575.jpeg?im_w=720 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Wohnbereich Bild 3" decoding="async" elementtiming="LCP-target" id="1778679430" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/1966a7c1-cb07-4f8e-a17a-102aed38e575.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/1966a7c1-cb07-4f8e-a17a-102aed38e575.jpeg?aki_policy=large" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/1966a7c1-cb07-4f8e-a17a-102aed38e575.jpeg?im_w=720);"></div></div></div></div></button></div></div></div></div></div></div></div></div></div></section></div></div></div><div data-pageslot="true" class="c1yo0219 dir dir-ltr"><div class="_1a6d9c4"><div class="plmw1e5 mq5rv0q dir dir-ltr" style="--maxWidth: 1120px;"><section><div class="bk5zv5c b1w3s95i pxj7xmk dir dir-ltr" style="--computedBottom: 3; --computedTop: 2; --computedBottomMediumAndAbove: 1; --computedBottomLargeAndAbove: 3; --computedTopMediumAndAbove: 5; --computedTopLargeAndAbove: 5;"><div data-testid="photo-viewer-section" class="_1gjkp1"><div class="c16f2viy dir dir-ltr"><div class="_12ifkibl"><div id="scrollTo_Voll ausgestattete Küche" class="_4cdkw4"><section><div class="bk5zv5c b1w3s95i pxj7xmk dir dir-ltr" style="--computedBottom: 3; --computedTop: 0; --computedBottomMediumAndAbove: 3; --computedBottomLargeAndAbove: 3; --computedTopMediumAndAbove: 0; --computedTopLargeAndAbove: 0;"><div class="sewcpu6 dir dir-ltr" style="--spacingBottom: 1;"><div class="t5p7tdn dir dir-ltr"><section><h2 tabindex="-1" class="hnwb2pb dir dir-ltr" elementtiming="LCP-target">Voll ausgestattete Küche</h2></section></div></div></div></section></div></div><div class="_10kc7acl"><div class="_125gmrun"><div style="display: grid; grid-area: 1 / 1;"><div class="_1lkwexi4"><div class="_cdo1mj" style="grid-area: 1 / 2 / span 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679371" aria-label="Voll ausgestattete Küche Bild 3" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 133%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 3" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/b6381274-b31f-42bc-a286-e9e8134a2daa.jpeg?im_w=720 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Voll ausgestattete Küche Bild 3" decoding="async" elementtiming="LCP-target" id="1778679371" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/b6381274-b31f-42bc-a286-e9e8134a2daa.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/b6381274-b31f-42bc-a286-e9e8134a2daa.jpeg?aki_policy=poster" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/b6381274-b31f-42bc-a286-e9e8134a2daa.jpeg?im_w=720);"></div></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679366" aria-label="Voll ausgestattete Küche Bild 1" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 1" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg?im_w=720 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Voll ausgestattete Küche Bild 1" decoding="async" elementtiming="LCP-target" id="1778679366" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg?aki_policy=large" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/de467013-2bd2-44a5-b426-8b604e46ee8b.jpeg?im_w=720);"></div></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 2 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679414" aria-label="Voll ausgestattete Küche Bild 2" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 2" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/e4cdabff-476f-4e74-99b8-29bb0079c9cc.jpeg?im_w=720 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Voll ausgestattete Küche Bild 2" decoding="async" elementtiming="LCP-target" id="1778679414" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/e4cdabff-476f-4e74-99b8-29bb0079c9cc.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/e4cdabff-476f-4e74-99b8-29bb0079c9cc.jpeg?aki_policy=large" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/e4cdabff-476f-4e74-99b8-29bb0079c9cc.jpeg?im_w=720);"></div></div></div></div></button></div></div></div></div><div style="display: grid; grid-area: 2 / 1;"><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679412" aria-label="Voll ausgestattete Küche Bild 4" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 4" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/3bd985db-0267-4058-b424-3f5581cee8bb.jpeg?im_w=1200 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Voll ausgestattete Küche Bild 4" decoding="async" elementtiming="LCP-target" id="1778679412" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/3bd985db-0267-4058-b424-3f5581cee8bb.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/3bd985db-0267-4058-b424-3f5581cee8bb.jpeg?aki_policy=large" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/3bd985db-0267-4058-b424-3f5581cee8bb.jpeg?im_w=720);"></div></div></div></div></button></div></div></div><div style="display: grid; grid-area: 3 / 1;"><div class="_1lkwexi4"><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679415" aria-label="Voll ausgestattete Küche Bild 5" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 5" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/13891dbc-6162-416b-846c-33924e8caf29.jpeg?im_w=720 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Voll ausgestattete Küche Bild 5" decoding="async" elementtiming="LCP-target" id="1778679415" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/13891dbc-6162-416b-846c-33924e8caf29.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/13891dbc-6162-416b-846c-33924e8caf29.jpeg?aki_policy=large" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/13891dbc-6162-416b-846c-33924e8caf29.jpeg?im_w=720);"></div></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679367" aria-label="Voll ausgestattete Küche Bild 6" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 6" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/670e40e7-c298-43c8-99a3-c5ec25313b2d.jpeg?im_w=720 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Voll ausgestattete Küche Bild 6" decoding="async" elementtiming="LCP-target" id="1778679367" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/670e40e7-c298-43c8-99a3-c5ec25313b2d.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/670e40e7-c298-43c8-99a3-c5ec25313b2d.jpeg?aki_policy=large" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/670e40e7-c298-43c8-99a3-c5ec25313b2d.jpeg?im_w=720);"></div></div></div></div></button></div></div></div></div><div style="display: grid; grid-area: 4 / 1;"><div class="_1lkwexi4"><div class="_cdo1mj" style="grid-area: 1 / 2 / span 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679394" aria-label="Voll ausgestattete Küche Bild 9" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 133%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 9" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/78a5f8a1-bc40-47be-8c61-3f001762378d.jpeg?im_w=720 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Voll ausgestattete Küche Bild 9" decoding="async" elementtiming="LCP-target" id="1778679394" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/78a5f8a1-bc40-47be-8c61-3f001762378d.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/78a5f8a1-bc40-47be-8c61-3f001762378d.jpeg?aki_policy=poster" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/78a5f8a1-bc40-47be-8c61-3f001762378d.jpeg?im_w=720);"></div></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679368" aria-label="Voll ausgestattete Küche Bild 7" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 7" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"><picture class=" dir dir-ltr"><source srcset="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/e41f744e-f100-4807-b11c-c6f15e787af7.jpeg?im_w=720 1x" media="(min-width: 0px)"><img class="itu7ddv i1mla2as i1cqnm0r dir dir-ltr" aria-hidden="true" alt="Voll ausgestattete Küche Bild 7" decoding="async" elementtiming="LCP-target" id="1778679368" src="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/e41f744e-f100-4807-b11c-c6f15e787af7.jpeg?im_w=720" data-original-uri="https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/e41f744e-f100-4807-b11c-c6f15e787af7.jpeg?aki_policy=large" style="--dls-liteimage-object-fit: cover;"></picture><div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr" style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https://a0.muscache.com/im/pictures/miso/Hosting-1022870940231653444/original/e41f744e-f100-4807-b11c-c6f15e787af7.jpeg?im_w=720);"></div></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 2 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679387" aria-label="Voll ausgestattete Küche Bild 8" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 8" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div></div></div><div style="display: grid; grid-area: 5 / 1;"><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679396" aria-label="Voll ausgestattete Küche Bild 10" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 10" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div></div><div style="display: grid; grid-area: 6 / 1;"><div class="_1lkwexi4"><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679399" aria-label="Voll ausgestattete Küche Bild 11" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 11" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679413" aria-label="Voll ausgestattete Küche Bild 12" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 12" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div></div></div><div style="display: grid; grid-area: 7 / 1;"><div class="_ejrgf68"><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679422" aria-label="Voll ausgestattete Küche Bild 13" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 133%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 13" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 2 / auto / span 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679427" aria-label="Voll ausgestattete Küche Bild 14" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Voll ausgestattete Küche Bild 14" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div></div></div></div></div></div></div></div></section></div></div></div><div data-pageslot="true" class="c1yo0219 dir dir-ltr"><div class="_1a6d9c4"><div class="plmw1e5 mq5rv0q dir dir-ltr" style="--maxWidth: 1120px;"><section><div class="bk5zv5c b1w3s95i pxj7xmk dir dir-ltr" style="--computedBottom: 3; --computedTop: 2; --computedBottomMediumAndAbove: 1; --computedBottomLargeAndAbove: 3; --computedTopMediumAndAbove: 5; --computedTopLargeAndAbove: 5;"><div data-testid="photo-viewer-section" class="_1gjkp1"><div class="c16f2viy dir dir-ltr"><div class="_12ifkibl"><div id="scrollTo_Badezimmer" class="_4cdkw4"><section><div class="bk5zv5c b1w3s95i pxj7xmk dir dir-ltr" style="--computedBottom: 3; --computedTop: 0; --computedBottomMediumAndAbove: 3; --computedBottomLargeAndAbove: 3; --computedTopMediumAndAbove: 0; --computedTopLargeAndAbove: 0;"><div class="sewcpu6 dir dir-ltr" style="--spacingBottom: 1;"><div class="t5p7tdn dir dir-ltr"><section><h2 tabindex="-1" class="hnwb2pb dir dir-ltr" elementtiming="LCP-target">Badezimmer</h2></section></div></div></div></section></div></div><div class="_10kc7acl"><div class="_125gmrun"><div style="display: grid; grid-area: 1 / 1;"><div class="_1lkwexi4"><div class="_cdo1mj" style="grid-area: 1 / 2 / span 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679395" aria-label="Badezimmer Bild 2" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 133%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Badezimmer Bild 2" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679352" aria-label="Badezimmer Bild 1" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Badezimmer Bild 1" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 2 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679397" aria-label="Badezimmer Bild 3" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Badezimmer Bild 3" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div></div></div><div style="display: grid; grid-area: 2 / 1;"><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679404" aria-label="Badezimmer Bild 4" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Badezimmer Bild 4" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div></div><div style="display: grid; grid-area: 3 / 1;"><div class="_1lkwexi4"><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679406" aria-label="Badezimmer Bild 5" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Badezimmer Bild 5" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679408" aria-label="Badezimmer Bild 6" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Badezimmer Bild 6" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div></div></div><div style="display: grid; grid-area: 4 / 1;"><div class="_1lkwexi4"><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679418" aria-label="Badezimmer Bild 7" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Badezimmer Bild 7" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679433" aria-label="Badezimmer Bild 8" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Badezimmer Bild 8" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div></div></div></div></div></div></div></div></section></div></div></div><div data-pageslot="true" class="c1yo0219 dir dir-ltr"><div class="_1a6d9c4"><div class="plmw1e5 mq5rv0q dir dir-ltr" style="--maxWidth: 1120px;"><section><div class="bk5zv5c b1w3s95i pxj7xmk dir dir-ltr" style="--computedBottom: 3; --computedTop: 2; --computedBottomMediumAndAbove: 1; --computedBottomLargeAndAbove: 3; --computedTopMediumAndAbove: 5; --computedTopLargeAndAbove: 5;"><div data-testid="photo-viewer-section" class="_1gjkp1"><div class="c16f2viy dir dir-ltr"><div class="_12ifkibl"><div id="scrollTo_Schlafbereich" class="_4cdkw4"><section><div class="bk5zv5c b1w3s95i pxj7xmk dir dir-ltr" style="--computedBottom: 3; --computedTop: 0; --computedBottomMediumAndAbove: 3; --computedBottomLargeAndAbove: 3; --computedTopMediumAndAbove: 0; --computedTopLargeAndAbove: 0;"><div class="sewcpu6 dir dir-ltr" style="--spacingBottom: 1;"><div class="t5p7tdn dir dir-ltr"><section><h2 tabindex="-1" class="hnwb2pb dir dir-ltr" elementtiming="LCP-target">Schlafbereich</h2></section></div></div><div class="_1dmhz6v"><ol class="_7h1p0g"><li theme="[object Object]" class="_1f1oir5"><span>3 Einzelbetten</span></li></ol></div></div></section></div></div><div class="_10kc7acl"><div class="_125gmrun"><div style="display: grid; grid-area: 1 / 1;"><div class="_1lkwexi4"><div class="_cdo1mj" style="grid-area: 1 / 1 / span 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679411" aria-label="Schlafbereich Bild 1" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 133%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Schlafbereich Bild 1" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679377" aria-label="Dein Ruheort zum ausschlafen. Alle Betten haben eine sehr gemütliche Matratze und natürlich sind die Betten mit einer kuscheligen Bettwäsche bezogen. Das Doppel Bett, kann man auch ganz einfach in zwei Einzelbetten verwandeln :) " type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Dein Ruheort zum ausschlafen. Alle Betten haben eine sehr gemütliche Matratze und natürlich sind die Betten mit einer kuscheligen Bettwäsche bezogen. Das Doppel Bett, kann man auch ganz einfach in zwei Einzelbetten verwandeln :) " style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 2 / 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679351" aria-label="Schlafbereich Bild 3" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Schlafbereich Bild 3" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div></div></div><div style="display: grid; grid-area: 2 / 1;"><div class="_1lkwexi4"><div class="_cdo1mj" style="grid-area: 1 / 2 / span 2;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679365" aria-label="Schlafbereich Bild 5" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 133%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Schlafbereich Bild 5" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 1 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679426" aria-label="Schlafbereich Bild 4" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Schlafbereich Bild 4" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div><div class="_cdo1mj" style="grid-area: 2 / 1;"><div class="c1d4ry4s dir dir-ltr"><button id="scrollTo_1778679400" aria-label="Schlafbereich Bild 6" type="button" class="_1xh26pm2 l1ovpqvx dir dir-ltr"><div class="_1oaklsk" style="overflow: hidden; padding-top: 67%;"><div class="_skzmvy"><div class="dqra4ro bmwtyu7 dir dir-ltr" role="img" aria-busy="false" aria-label="Schlafbereich Bild 6" style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url('data:image/png;base64,'); --dls-liteimage-background-size: cover;"></div></div></div></button></div></div></div></div></div></div></div></div></div></section></div></div></div></div></section></div>
EOT;
        $message->role = 'user';
        $message->sender_id = Auth::user()->id;

        $this->addMessage($message);

        $this->tools[] = [
            'type' => 'function',
            'function' => [
                'name' => 'image_extractor',
                'description' => 'Gibt alle Bilder zum gegebenen Inserat gruppiert nach Zimmername zurück',
                'parameters' => [
                    'type' => 'object',
                    'properties' => [
                        'rooms' => [
                            'type' => 'object',
                            'description' => 'Objekt mit den Namen der Zimmer, für die Bilder extrahiert werden sollen.',
                            'properties' => [
                                'name' => [
                                    'type' => 'string',
                                    'description' => 'Name des Zimmers'
                                ],
                                'images' => [
                                    'type' => 'array',
                                    'description' => 'Array mit URLs zu den Bildern',
                                    'items' => [
                                        'type' => 'string',
                                        'description' => 'URL zum Bild'
                                    ]
                                ]
                            ]
                        ]
                    ],
                    'required' => ['rooms'],
                ]
            ]
        ];

        $this->use_functions = true;
        $this->functionCall = 'image_extractor';
        $this->tool_choice = [
            'type' => "function",
            'function' => ['name' => 'image_extractor']
        ];

        $response = parent::run();

        echo '<pre>';
            print_r($response);
            echo '</pre>';

            // Legacy function call
        if(isset($response->functionCall)) {
            $functionName = $response->functionCall->name;
            $result = $this->$functionName($response);
        } else if(isset($response->toolCalls)) {
            // Tool call
            $functionName = $response->toolCalls[0]->function->name;
            $result = $this->$functionName($response);
        } else {
            echo parent::fixUmlauts($response->content);
            throw new \Exception("No function call received in AirbnbScraperAgent");
        }

        // Now that we have the texts, delete the agent
        Agent::where('id', $this->id)->delete();

        return to_route('housings.show', $this->agentable->id);

    }

    private function image_extractor($response) {
        $arguments = json_decode($response->toolCalls[0]->function->arguments);

        echo '<pre>';
        print_r($arguments);
        echo '</pre>';
        exit();

        return $contents;
    }

    public function finished() {
        return true;
    }
}
